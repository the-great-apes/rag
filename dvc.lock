schema: '2.0'
stages:
  parse:
    cmd: python -m src.parse
    deps:
    - path: data/raw/
      hash: md5
      md5: 8f98f72328a8b55e32ce6bd12b678036.dir
      size: 815155223
      nfiles: 38
    - path: src/parse.py
      hash: md5
      md5: 8e242c871587348c1b953c8fe18a77f8
      size: 1387
    params:
      params.yaml:
        data.parsed: data/parsed/
        data.raw: data/raw/
    outs:
    - path: data/parsed/
      hash: md5
      md5: 9f2cce5c1c77c56a82b02e1fbc70e6cc.dir
      size: 8361445
      nfiles: 15
  clean:
    cmd: python -m src.clean
    deps:
    - path: data/parsed/
      hash: md5
      md5: 9f2cce5c1c77c56a82b02e1fbc70e6cc.dir
      size: 8361445
      nfiles: 15
    - path: src/clean.py
      hash: md5
      md5: ca662ded2dbd85890e3d7407fa72c3c4
      size: 1581
    params:
      params.yaml:
        data.clean: data/clean/
        data.parsed: data/parsed/
    outs:
    - path: data/clean/
      hash: md5
      md5: 9dc4554dd30b494d9ffb1a9311ed4edc.dir
      size: 7860116
      nfiles: 15
  chunk:
    cmd: python -m src.chunk
    deps:
    - path: data/clean/
      hash: md5
      md5: 9dc4554dd30b494d9ffb1a9311ed4edc.dir
      size: 7860116
      nfiles: 15
    - path: src/chunk.py
      hash: md5
      md5: be0e8eded6fee8f56ac3c6738eaad349
      size: 2286
    params:
      params.yaml:
        data.chunk: data/chunk/
        data.clean: data/clean/
    outs:
    - path: data/chunk/
      hash: md5
      md5: be6d3a5bbfee6a935271e0fb4f5957c4.dir
      size: 15771211
      nfiles: 15
  index:
    cmd: python -m src.index
    deps:
    - path: data/chunk/
      hash: md5
      md5: be6d3a5bbfee6a935271e0fb4f5957c4.dir
      size: 15771211
      nfiles: 15
    - path: src/chunk.py
      hash: md5
      md5: be0e8eded6fee8f56ac3c6738eaad349
      size: 2286
    params:
      params.yaml:
        data.chunk: data/chunk/
        data.index: data/index/
    outs:
    - path: data/index/
      hash: md5
      md5: 6d7f931c1f3ab92a44dae11056667ba7.dir
      size: 244632142
      nfiles: 75
  exrtact:
    cmd: python -m src.extract
    deps:
    - path: data/index/
      hash: md5
      md5: 6d7f931c1f3ab92a44dae11056667ba7.dir
      size: 244632142
      nfiles: 75
    - path: src/extract.py
      hash: md5
      md5: f0f6eb64fa44e05cc04a5de56bcb08c0
      size: 5092
    params:
      params.yaml:
        data.index: data/index/
        data.summary: data/summary/
        extraction:
          citation_chunk_size: 1024
          kpis:
          - revenue
          - cash flow
          - Cost of Goods Sold
          - COGS
          - Cost of Materials
          - Depreciation
          - Amortization
          - Purchase Price Allocation
          - PPA
          - Purchase Price Adjustmen
          templates:
            driver: make a short summary about the major drivers behind {company}s
              {kpi} change in {year}?
            kpi: "- You are a professional Financial and Business analyst.\n- Your
              job is to find a Key Performance indicator (KPI) for {company} and format/return
              it\n- in the base number system (not Million/Billion) as well as retrieve
              the currency.\\n\n- ------------------------------------\n- Example:\n
              - IBM's revenue for the year was $61.9 billion. -> 61900000000\n- ------------------------------------\n
              - find the {kpi} KPI\n- ------------------------------------\n- the
              output is only the formatted number and currency and nothing else!\n
              - if you don't find the KPI, output 'KPI not found'\n- ------------------------------------\n
              - Example output where KPI is found:\n- 61900000000, $\n- Example output
              where KPI is NOT found:\n- KPI not found\n"
            summary: "- You are a professional Financial and Business analyst and
              you just read an incredibly long annual report of the company {company}
              from the year {year}.\n- You are super proud of yourself and therefore
              you want to summarize all the information you gathered to give your
              coworkers the shortest\n- and most informative summary about the annual
              report. Following sidenotes about the KPIs of the company you managed
              to gather:\n- {kpis}\n- Be as precise and short as possible with your
              summary, since people don't like long text and would lose interest.\
              \  \n"
    outs:
    - path: data/summary/
      hash: md5
      md5: 724956e99694ce8ef908793613e51278.dir
      size: 530201
      nfiles: 15
